"use strict";

require("core-js/modules/es.regexp.flags.js");

require("core-js/modules/web.immediate.js");

var _icons = _interopRequireDefault(require("url:../img/icons.svg"));

var _model = require("./model");

var _RecipeView = require("./views/RecipeView");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// first try fetching the api
// https://forkify-api.herokuapp.com/api/v2/recipes/5ed6604591c37cdc054bc886
const controlRecipes = async function () {
  try {
    const id = window.location.hash.slice(1);
    if (!id) return;
    (0, _RecipeView.renderSpinner)();
    const {
      data
    } = await (0, _model.getJSON)(id);
    const recipe = (0, _model.loadRecipe)(data); // Rendering html

    generateRecipeMarkup(recipe);
  } catch (err) {
    console.log(err);
  }
};

['hashchange', 'load'].forEach(ev => window.addEventListener(ev, controlRecipes));